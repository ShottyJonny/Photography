:root{color-scheme: light dark;}
/* Theme tokens */
:root{
	--bg: canvas;
	--bg-subtle: color-mix(in oklab, canvas 96%, canvasText 4%);
	--bg-elev: color-mix(in oklab, canvas 92%, canvasText 8%);
	--bg-elev-2: color-mix(in oklab, canvas 94%, canvasText 6%);
	--text: canvasText;
	--border: color-mix(in oklab, canvasText 15%, transparent);
	--border-soft: #0002;
	--muted: color-mix(in oklab, canvasText 12%, transparent);
	background: var(--bg);
	color: var(--text);
}

/* Mobile performance optimizations */
@media (max-width: 768px) {
	:root {
		/* Reduce backdrop filter blur on mobile for better performance */
		--backdrop-blur: blur(2px);
	}
	
	/* Softer background on mobile dark mode */
	@media (prefers-color-scheme: dark) {
		:root {
			--bg: #1a1a1e; /* Charcoal instead of pure black */
			--bg-subtle: #1e1e23;
			--bg-elev: #25252b;
			--bg-elev-2: #2a2a30;
		}
	}
}

@media (min-width: 769px) {
	:root {
		--backdrop-blur: blur(4px);
	}
}

[data-theme="light"]{
	color-scheme: light;
}
[data-theme="dark"]{
	color-scheme: dark;
}
*{box-sizing:border-box}
body{
	margin:0;
	font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
	line-height:1.5;
	background:var(--bg);
	color:var(--text);
	/* Mobile optimization: Enable hardware acceleration and smooth scrolling */
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	text-rendering: optimizeSpeed;
	/* Prevent horizontal scrolling issues from drawer */
	overflow-x: hidden;
}
#root{
	min-height:100dvh;
	display:grid;
	place-items:start center;
	/* Enable GPU acceleration for smoother animations */
	transform: translateZ(0);
}
.container{width:min(100%,960px);padding:24px}

/* Enhanced mobile optimizations */
@media (max-width: 480px) {
	.container{padding:16px}
	
	/* Better touch targets */
	button, .button {
		min-height: 44px;
		padding: 12px 16px;
		/* Improve tap responsiveness */
		-webkit-tap-highlight-color: rgba(0,0,0,0.1);
		touch-action: manipulation;
	}
	
	/* Improved mobile typography */
	body {
		font-size: 16px; /* Prevents zoom on iOS */
		/* Reduce font smoothing workload on mobile */
		-webkit-font-smoothing: subpixel-antialiased;
	}
	
	/* Better mobile spacing */
	.product-card {
		padding: 16px;
		/* Reduce expensive effects on mobile */
		will-change: transform;
		transform: translateZ(0);
	}
	
	.nav-buttons button {
		padding: 12px 16px;
		min-height: 44px;
	}
	
	/* Reduce animations complexity on mobile */
	.route-fade {
		animation-duration: 0.15s; /* Faster transitions */
	}
}
header h1{margin:0}
main{margin-top:16px}
.route-fade{
	animation:routeIn .25s ease both;
	/* Enable hardware acceleration */
	will-change:opacity, transform;
	transform:translateZ(0);
}
@keyframes routeIn{
	from{opacity:0;transform:translateY(6px) translateZ(0)}
	to{opacity:1;transform:translateY(0) translateZ(0)}
}

/* Mobile-specific route transitions */
@media (max-width: 768px) {
	.route-fade{
		animation-duration: .15s; /* Faster on mobile */
	}
}

/* Header */
.app-header{
	position:sticky;
	top:0;
	z-index:10;
	display:grid;
	grid-template-columns:auto 1fr auto;
	align-items:center;
	gap:12px;
	padding:12px 16px;
	border:1px solid var(--border);
	border-radius:12px;
	background:var(--bg-elev);
	backdrop-filter:saturate(1.1) var(--backdrop-blur, blur(4px));
	/* Optimize for mobile performance */
	will-change: transform;
	transform: translateZ(0);
	/* Enable absolute positioning for cart button */
	position: relative;
}
.brand-button{display:flex;align-items:center;gap:10px;appearance:none;background:none;border:none;padding:6px 8px;border-radius:8px;cursor:pointer;position:relative}
/* corner logo aura removed */
.brand-button:hover{background:transparent}
.brand-logo{height:36px;width:auto;display:block;position:relative;z-index:1;transition:filter .18s ease;filter:drop-shadow(0 2px 3px rgba(0,0,0,.18))}
/* Slightly stronger on hover/focus */
.brand-button:hover .brand-logo,
.brand-button:focus-visible .brand-logo{filter:drop-shadow(0 3px 6px rgba(0,0,0,.22))}
.wordmark-bar{display:grid;place-items:center;margin:8px 0}
.wordmark-bar img{height:32px;width:auto;display:block;opacity:.95;position:relative;z-index:1;transition:filter .18s ease;filter:drop-shadow(0 2px 3px rgba(0,0,0,.16))}
/* Slightly stronger on hover/focus */
.wordmark-bar .brand-button:hover img,
.wordmark-bar .brand-button:focus-visible img{filter:drop-shadow(0 3px 6px rgba(0,0,0,.22))}
@media (min-width: 960px){
	.wordmark-bar img{height:96px}
}
.wordmark-bar .brand-button{position:relative}
/* script aura removed */
.nav-buttons{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
.nav-buttons button{appearance:none;-webkit-appearance:none;border:1px solid var(--border-soft);border-radius:999px;padding:.45rem .9rem;background:var(--bg-elev-2);color:var(--text);cursor:pointer;transition:background-color .2s ease,border-color .2s ease,transform .06s ease;-webkit-tap-highlight-color:transparent}
.nav-buttons button:hover{filter:brightness(1.07)}
.nav-buttons button:active{transform:translateY(.5px);background:var(--bg-elev-2) !important;color:var(--text) !important}
.nav-buttons button:focus{background:var(--bg-elev-2) !important;color:var(--text) !important;outline:none}
.cart-btn{position:relative}
.cart-pill{display:inline-grid;place-items:center;margin-left:6px;min-width:1.25rem;height:1.25rem;padding:0 .25rem;border-radius:999px;background:var(--border);font-size:.75rem}
.header-actions{display:none}
.menu-toggle{appearance:none;border:1px solid var(--border-soft);border-radius:10px;background:transparent;padding:6px;display:grid;gap:4px;cursor:pointer;transition:background-color .2s ease,border-color .2s ease,transform .06s ease}
.menu-toggle .bar{width:22px;height:2px;background:currentColor;display:block}

/* Desktop: show actions row; Mobile: collapse nav */
.header-actions{display:flex;justify-self:end;align-items:center;gap:8px}
/* Hide hamburger on desktop */
.menu-toggle{display:none}
@media (max-width: 720px){
	.app-header{grid-template-columns: auto 1fr auto}
	.nav-buttons{display:none}
	.app-header.open .nav-buttons{display:flex;grid-column:1 / -1;order:3;justify-content:flex-start;margin-top:8px}
	.menu-toggle{display:grid}
}

/* Floating Cart Button - Completely Independent Sticky Entity */
.floating-cart-btn{
	/* Sticky positioning - sticks to bottom-right of viewport */
	position: sticky;
	bottom: 24px;
	/* Use margin to push to right edge of viewport */
	margin: 0 24px 0 auto;
	/* Make it a block element that takes up space */
	display: block;
	/* Positioning and appearance */
	width: 56px;
	height: 56px;
	border-radius: 50%;
	background: var(--bg-elev);
	border: 2px solid var(--border);
	color: var(--text);
	cursor: pointer;
	/* Center the icon */
	display: grid;
	place-items: center;
	/* Animations and effects */
	transition: transform .2s ease, box-shadow .2s ease, background-color .2s ease;
	box-shadow: 0 4px 12px rgba(0,0,0,.15);
	-webkit-tap-highlight-color: transparent;
	/* Performance optimizations */
	will-change: transform;
	backface-visibility: hidden;
	/* Ensure it's above other content */
	z-index: 1000;
	/* Remove any inherited positioning */
	float: none;
	clear: none;
}
.floating-cart-btn:hover{
	transform:translateY(-2px);
	box-shadow:0 6px 16px rgba(0,0,0,.2);
	background:var(--bg-elev-2);
}
.floating-cart-btn:active{
	transform:translateY(0);
	box-shadow:0 2px 8px rgba(0,0,0,.15);
}
.floating-cart-btn .cart-badge{
	position:absolute;
	top:-4px;
	right:-4px;
	min-width:20px;
	height:20px;
	padding:0 6px;
	border-radius:999px;
	background:#e63946;
	color:#fff;
	font-size:.75rem;
	font-weight:600;
	display:grid;
	place-items:center;
	box-shadow:0 2px 4px rgba(0,0,0,.2);
}
@media (max-width: 720px){
	.floating-cart-btn{
		/* Keep sticky on mobile but adjust sizing and safe areas */
		/* Use fixed positioning on mobile for more reliable placement */
		position: fixed;
		bottom: max(20px, env(safe-area-inset-bottom, 20px));
		right: max(20px, env(safe-area-inset-right, 20px));
		left: auto;
		margin: 0;
		width: 48px;
		height: 48px;
		z-index: 1001; /* Slightly higher on mobile */
	}
	.floating-cart-btn svg{
		width: 20px;
		height: 20px;
	}
}

/* Cart Drawer */
.cart-drawer-overlay{
	position:fixed;
	inset:0;
	background:rgba(30,30,35,.40); /* Softer charcoal instead of pure black */
	backdrop-filter:var(--backdrop-blur, blur(3px));
	z-index:1000;
	opacity:0;
	pointer-events:none;
	transition:opacity .3s ease;
	/* Mobile optimization */
	will-change:opacity;
}
.cart-drawer-overlay.open{
	opacity:1;
	pointer-events:auto;
}
.cart-drawer{
	position:fixed;
	top:0;
	right:-100%; /* Start completely off-screen */
	bottom:0;
	height:100vh; /* Constrain to viewport height */
	width:min(380px, 85vw);
	background:var(--bg);
	box-shadow:-4px 0 24px rgba(0,0,0,.15);
	z-index:1001;
	display:flex;
	flex-direction:column;
	/* Simple slide transition */
	transition: right 0.3s ease;
	will-change: right;
	/* Rounded corners */
	border-top-left-radius: 12px;
	border-bottom-left-radius: 12px;
	/* Prevent page widening when hidden */
	overflow:hidden;
	max-width:100vw;
	/* Ensure proper height calculation */
	max-height:100vh;
}
.cart-drawer.open{
	right:0; /* Simple slide in from right */
}

/* Mobile-specific optimizations */
@media (max-width: 768px) {
	.cart-drawer-overlay{
		/* Faster transition on mobile */
		transition:opacity .2s ease;
		/* Less intrusive backdrop */
		backdrop-filter:var(--backdrop-blur, blur(1px));
		background:rgba(30,30,35,.35); /* Softer charcoal for mobile */
	}
	.cart-drawer{
		/* Simple, fast slide animation on mobile */
		transition: right 0.25s ease;
		width: min(320px, 90vw);
		/* Account for safe areas */
		top: env(safe-area-inset-top, 0px);
		bottom: env(safe-area-inset-bottom, 0px);
		/* More pronounced rounded corners on mobile */
		border-top-left-radius: 16px;
		border-bottom-left-radius: 16px;
	}
	
	.cart-drawer.open{
		right: env(safe-area-inset-right, 0px); /* Account for safe areas when open */
	}
}

/* Extra small mobile devices */
@media (max-width: 480px) {
	.cart-drawer{
		/* Even more conservative on very small screens */
		width: min(280px, 85vw);
	}
}

/* Toast Notifications - Bottom Viewport Position */
.toasts-container {
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	z-index: 1500;
	display: flex;
	flex-direction: column;
	gap: 0;
	pointer-events: none;
	padding-bottom: env(safe-area-inset-bottom, 0px);
}

.toast {
	background: var(--bg-elev);
	border-top: 1px solid var(--border);
	padding: 16px 20px;
	box-shadow: 0 -2px 12px rgba(0,0,0,.1);
	color: var(--text);
	font-size: 0.9rem;
	line-height: 1.4;
	cursor: pointer;
	pointer-events: auto; /* Individual toasts are clickable */
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 16px;
	/* Simple slide-up from bottom */
	transform: translateY(100%);
	opacity: 0;
	transition: all 0.3s ease;
	will-change: transform, opacity;
	backdrop-filter: saturate(1.1) blur(8px);
}

/* Toast enters with slide-up animation */
.toast {
	animation: slideUpToast 0.3s ease forwards;
}

@keyframes slideUpToast {
	from {
		transform: translateY(100%);
		opacity: 0;
	}
	to {
		transform: translateY(0);
		opacity: 1;
	}
}

/* Toast closing animation */
.toast.closing {
	animation: slideDownToast 0.3s ease forwards;
}

@keyframes slideDownToast {
	from {
		transform: translateY(0);
		opacity: 1;
	}
	to {
		transform: translateY(100%);
		opacity: 0;
	}
}

.toast-message {
	flex: 1;
}

.toast-dismiss {
	background: none;
	border: none;
	color: var(--text);
	font-size: 1.5rem;
	line-height: 1;
	cursor: pointer;
	padding: 0;
	width: 24px;
	height: 24px;
	display: grid;
	place-items: center;
	border-radius: 4px;
	transition: background-color 0.2s ease;
	flex-shrink: 0;
}

.toast-dismiss:hover {
	background: rgba(0, 0, 0, 0.1);
}

/* Toast types */
.toast.success {
	border-left: 4px solid #22c55e;
	background: color-mix(in srgb, #22c55e 8%, var(--bg-elev));
}

.toast.error {
	border-left: 4px solid #ef4444;
	background: color-mix(in srgb, #ef4444 8%, var(--bg-elev));
}

.toast.warning {
	border-left: 4px solid #f59e0b;
	background: color-mix(in srgb, #f59e0b 8%, var(--bg-elev));
}

.toast.info {
	border-left: 4px solid #3b82f6;
	background: color-mix(in srgb, #3b82f6 8%, var(--bg-elev));
}

/* Mobile toast adjustments */
@media (max-width: 720px) {
	.toast {
		padding: 14px 16px;
		font-size: 0.85rem;
		/* Faster animation on mobile */
		animation-duration: 0.25s;
	}
	
	.toast.closing {
		animation-duration: 0.25s;
	}
}
.cart-drawer-header{
	display:flex;
	align-items:center;
	justify-content:space-between;
	padding:16px 20px; /* Slightly more compact */
	border-bottom:1px solid var(--border-soft); /* Softer border */
	background:var(--bg-subtle); /* Less prominent background */
	/* Rounded top corners to match drawer */
	border-top-left-radius: 12px;
}
.cart-drawer-header h2{
	margin:0;
	font-size:1.3rem; /* Slightly smaller, less aggressive */
	font-weight:600; /* Medium weight instead of bold */
	opacity:0.9; /* Subtle opacity */
}
.cart-drawer-header .close-btn{
	width:40px;
	height:40px;
	border-radius:8px;
	border:1px solid var(--border-soft);
	background:transparent;
	display:grid;
	place-items:center;
	cursor:pointer;
	transition:background-color .2s ease, transform .1s ease;
}
.cart-drawer-header .close-btn:hover{
	background:var(--bg-elev-2);
}
.cart-drawer-header .close-btn:active{
	transform:scale(.95);
}
.cart-drawer-content{
	flex:1;
	overflow-y:auto;
	overflow-x:hidden;
	display:flex;
	flex-direction:column;
	/* Smooth scrolling */
	-webkit-overflow-scrolling:touch;
	/* Ensure scrolling works properly */
	min-height:0;
	padding-bottom:8px;
}
.cart-empty{
	flex:1;
	display:flex;
	flex-direction:column;
	align-items:center;
	justify-content:center;
	gap:16px;
	padding:40px 24px;
	text-align:center;
}
.cart-empty p{
	opacity:.7;
	margin:0;
	font-size:1.1rem;
}
.cart-items{
	flex:1;
	padding:16px;
	display:flex;
	flex-direction:column;
	gap:16px;
}
.cart-drawer-item{
	display:grid;
	grid-template-columns:100px 1fr;
	gap:16px;
	padding:16px;
	border:1px solid var(--border);
	border-radius:12px;
	background:var(--bg-elev);
	transition:box-shadow .2s ease;
}
.cart-drawer-item:hover{
	box-shadow:0 2px 8px rgba(0,0,0,.1);
}
.cart-item-image{
	width:100px;
	height:100px;
	object-fit:cover;
	border-radius:8px;
	background:var(--bg-subtle);
}
.cart-item-details{
	display:flex;
	flex-direction:column;
	gap:8px;
	min-width:0;
}
.cart-item-name{
	font-weight:600;
	font-size:1rem;
	overflow:hidden;
	text-overflow:ellipsis;
	white-space:nowrap;
}
.cart-item-size{
	font-size:.85rem;
	opacity:.7;
}
.cart-item-controls{
	display:flex;
	flex-direction:column;
	gap:8px;
	margin-top:auto;
}
.size-selector{
	display:flex;
	align-items:center;
	gap:8px;
	font-size:.9rem;
}
.size-selector span{
	opacity:.8;
	min-width:40px;
}
.cart-item-actions{
	display:flex;
	align-items:center;
	gap:8px;
}
.cart-qty-input{
	width:50px;
	padding:4px 8px;
	border:1px solid var(--border);
	border-radius:4px;
	background:var(--bg);
	color:var(--text);
	text-align:center;
	font-weight:600;
	font-size:0.9rem;
}
.cart-qty-input:focus{
	outline:none;
	border-color:#2563eb;
	box-shadow:0 0 0 2px rgba(37, 99, 235, 0.1);
}
.cart-qty-input::-webkit-outer-spin-button,
.cart-qty-input::-webkit-inner-spin-button {
	-webkit-appearance:none;
	margin:0;
}
.cart-qty-input[type=number] {
	-moz-appearance:textfield;
	appearance:textfield;
}
.cart-item-price{
	font-weight:600;
	font-size:1.1rem;
	color:var(--text);
	margin-top:4px;
}
.cart-drawer-footer{
	padding:20px 24px;
	border-top:1px solid var(--border);
	background:var(--bg-elev);
	display:flex;
	flex-direction:column;
	gap:16px;
	/* Keep footer at bottom, fixed position within drawer */
	flex-shrink:0;
}
.cart-totals{
	display:flex;
	flex-direction:column;
	gap:8px;
}
.cart-line{
	display:flex;
	align-items:center;
	justify-content:space-between;
	font-size:1rem;
}
.cart-total{
	font-weight:700;
	font-size:1.2rem;
	padding-top:8px;
	border-top:1px solid var(--border);
	margin-top:4px;
}
.cart-tax-note{
	text-align:center;
	margin-top:8px;
	opacity:0.7;
}
.cart-tax-note small{
	font-size:0.85rem;
}
.cart-drawer-actions{
	display:flex;
	flex-direction:column;
	gap:12px;
}
.cart-drawer-actions .button{
	width:100%;
	justify-content:center;
}
.cart-drawer-actions .primary{
	background:#2563eb;
	color:#fff;
	border:none;
	font-weight:600;
	padding:14px 24px;
}
.cart-drawer-actions .primary:hover{
	background:#1d4ed8;
}
.cart-drawer-actions .secondary{
	background:transparent;
	border:1px solid var(--border);
	color:var(--text);
}
.cart-drawer-actions .secondary:hover{
	background:var(--bg-elev-2);
}

code{background:#0001;padding:0 4px;border-radius:4px}

/* Shop grid */
.grid{
	display:grid;
	grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
	gap:16px;
}
.shop .grid{grid-template-columns:repeat(2, minmax(0, 1fr))}
@media (max-width: 720px){
	.shop .grid{grid-template-columns:1fr}
}
.shop-toolbar{display:flex;flex-wrap:wrap;gap:12px;align-items:end;margin:12px 0}
.shop-toolbar .field{display:grid;gap:4px}
.shop-toolbar .field.range{min-width:220px}
.shop-toolbar .value{font-weight:600}
.shop-toolbar .spacer{flex:1 1 auto}
.shop-toolbar .actions{display:flex;gap:8px}

/* Shop toolbar controls */
.shop-toolbar label{font-size:.9rem;opacity:.8}
.shop-toolbar select,
.select{
	appearance:none;
	border:1px solid #0002;
	border-radius:8px;
	padding:.45rem 2rem .45rem .6rem;
	background:color-mix(in oklab, canvas 94%, canvasText 6%);
	cursor:pointer;
	line-height:1.2;
	background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 8 10 12 14 8'/></svg>");
	background-repeat:no-repeat;
	background-position: right .6rem center;
	background-size:.85rem;
	transition: filter .15s ease, border-color .15s ease, background-color .15s ease;
}
.shop-toolbar select:hover,
.select:hover{filter:brightness(1.06)}
.shop-toolbar select:focus,
.select:focus{outline:2px solid color-mix(in oklab, canvasText 20%, transparent);outline-offset:2px}
.shop-toolbar select:active,
.select:active{transform:translateY(0.5px)}

/* Range slider styling */
.shop-toolbar input[type="range"]{ -webkit-appearance:none; appearance:none; width:220px; background:transparent;}
.shop-toolbar input[type="range"]:focus{outline:none}
/* WebKit */
.shop-toolbar input[type="range"]::-webkit-slider-runnable-track{height:6px;background:color-mix(in oklab, canvasText 12%, transparent);border-radius:999px}
.shop-toolbar input[type="range"]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:18px; height:18px; border-radius:50%; background:color-mix(in oklab, canvas 92%, canvasText 8%); border:1px solid color-mix(in oklab, canvasText 20%, transparent); margin-top:-6px; cursor:pointer}
.shop-toolbar input[type="range"]:hover::-webkit-slider-thumb{filter:brightness(1.06)}
/* Firefox */
.shop-toolbar input[type="range"]::-moz-range-track{height:6px;background:color-mix(in oklab, canvasText 12%, transparent);border-radius:999px}
.shop-toolbar input[type="range"]::-moz-range-thumb{width:18px; height:18px; border-radius:50%; background:color-mix(in oklab, canvas 92%, canvasText 8%); border:1px solid color-mix(in oklab, canvasText 20%, transparent); cursor:pointer}
.product-card{border:1px solid color-mix(in oklab, var(--text) 10%, transparent);border-radius:8px;padding:12px;background:var(--bg-subtle)}
.product-card img{
	width:100%;
	height:220px;
	object-fit:cover;
	border-radius:6px;
	background:#0001;
}
.product-card .card-link{position:relative;display:block}
.product-card .card-link img{position:relative;z-index:1}
.product-card .thumb-aura{position:absolute;inset:-14% -14% -14% -14%;filter:blur(26px);border-radius:10px;z-index:0;pointer-events:none}
.product-card .card-grid{display:grid;grid-template-columns:180px 1fr;gap:12px;align-items:start}
.product-card .card-body{display:flex;flex-direction:column}
.product-card .card-link,
.product-card .title-link{appearance:none;border:none;background:none;padding:0;margin:0;cursor:pointer;text-align:left}
.product-card .title-link{text-decoration:underline dotted transparent}
.product-card .title-link:hover{ text-decoration-color: currentColor }
.product-card h3{margin:.5rem 0 0}
.product-card p{margin:.25rem 0 .5rem}
.product-card .desc{opacity:.9;display:-webkit-box;line-clamp:3;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
.product-card .price{font-weight:700}
.product-card .actions{display:flex;gap:8px;margin-top:8px}

@media (max-width: 720px){
	.product-card .card-grid{grid-template-columns:1fr}
}

/* Cart */
.cart-list{
	display:grid;
	gap:12px;
}
.cart-line{display:grid;grid-template-columns:80px 1fr auto;gap:12px;align-items:center;border:1px solid color-mix(in oklab, var(--text) 10%, transparent);border-radius:8px;padding:8px 12px}
.cart-line img{width:80px;height:80px;object-fit:cover;border-radius:6px}
.cart-line input{width:64px;margin-left:8px}
.cart-total{display:flex;justify-content:space-between;font-weight:700;padding-top:8px;border-top:1px solid #0002}
.button{display:inline-block;padding:.55rem .9rem;border:1px solid var(--border-soft);border-radius:12px;background:var(--bg-elev-2);cursor:pointer;transition:background-color .18s ease,border-color .18s ease,box-shadow .18s ease,transform .06s ease;-webkit-appearance:none;appearance:none}
.button:hover{background:color-mix(in oklab, var(--bg-elev-2) 90%, var(--text) 10%)}
.button:active{transform:translateY(.5px);background:var(--bg-elev-2) !important;color:var(--text) !important}
.button:focus{outline:2px solid color-mix(in oklab, var(--text) 16%, transparent);outline-offset:2px;background:var(--bg-elev-2) !important;color:var(--text) !important}
.button:focus-visible{background:var(--bg-elev-2) !important;color:var(--text) !important}

/* Icon buttons */
.icon-btn{appearance:none;border:1px solid var(--border);background:var(--bg-elev-2);border-radius:10px;padding:.4rem;cursor:pointer;vertical-align:middle;margin-left:6px;transition:background-color .2s ease,border-color .2s ease,transform .06s ease}
.icon-btn:hover{filter:brightness(1.06)}
.icon-btn svg{display:block}
.icon-btn:active{transform:translateY(.5px)}

/* Theme toggle */
.theme-toggle{display:inline-grid;place-items:center;overflow:hidden}
.theme-toggle .icon-wrap{position:relative;width:22px;height:22px}
.theme-toggle .theme-icon{position:absolute;inset:0;display:grid;place-items:center;transform-origin:11px 22px}
.theme-toggle svg{width:20px;height:20px}
/* Orbit animation: outgoing rises and arcs left, incoming arcs right into place */
.theme-toggle.spinning .theme-icon.out{animation:iconOrbitOut .5s ease forwards}
.theme-toggle.spinning .theme-icon.in{animation:iconOrbitIn .5s ease forwards}
@keyframes iconOrbitOut{0%{transform:translate(0,0) rotate(0)}50%{transform:translate(-10px,-8px) rotate(-90deg);opacity:.7}100%{transform:translate(-20px,0) rotate(-180deg);opacity:0}}
@keyframes iconOrbitIn{0%{transform:translate(20px,0) rotate(180deg);opacity:0}50%{transform:translate(10px,-8px) rotate(90deg);opacity:.7}100%{transform:translate(0,0) rotate(0);opacity:1}}

/* Dropdown (flush with button + smooth animation) */
.dropdown{position:relative;display:inline-block}
.dropdown-trigger{
	display:inline-flex;align-items:center;gap:8px;
	border-radius:10px; /* slightly more rounded */
	padding:.5rem .7rem;
	border:1px solid var(--border-soft);
	background:var(--bg-elev-2);
	transition:background-color .2s ease,border-color .2s ease,transform .06s ease;
}
.dropdown-caret{opacity:.8;margin-left:2px}
.dropdown-menu{
	position:absolute;inset:auto 0 0 0;transform:translateY(calc(100% + 6px));
	list-style:none;margin:0;padding:6px;min-width:100%;
	border:1px solid var(--border);
	border-radius:8px;background:var(--bg); /* solid, not transparent */
	box-shadow:0 6px 24px rgba(0,0,0,.12);
	display:grid;gap:4px;
	pointer-events:none;opacity:0;transform-origin:top center;
	transition: opacity .18s ease, transform .18s ease;
	z-index:20;
}
.dropdown[data-open="true"] .dropdown-menu{pointer-events:auto;opacity:1;transform:translateY(calc(100% + 6px)) scale(1)}
.dropdown .dropdown-menu{transform:translateY(calc(100% + 2px)) scale(.98)}
.dropdown-option{appearance:none;border:1px solid transparent;background:var(--bg);border-radius:10px;padding:.45rem .55rem;text-align:left;cursor:pointer;transition:background-color .2s ease,border-color .2s ease}
.dropdown-option:hover,.dropdown-option.active{background:var(--bg-elev-2)}
.dropdown-option.selected{border-color:color-mix(in oklab, var(--text) 18%, transparent)}

/* Home */
.hero{display:grid;grid-template-columns:1fr 1fr;gap:24px;align-items:center}
.hero img{width:100%;border-radius:10px;object-fit:cover;background:#0001}
.featured.only-image img{width:100%;margin-left:auto;margin-right:auto;display:block}
.hero-copy .price{font-weight:700;margin:.25rem 0 .5rem}
.featured{display:grid;grid-template-columns:1fr 1fr;gap:16px;border:1px solid var(--border-soft);border-radius:10px;padding:12px}
.featured-body h3{margin:0 0 .25rem}
.featured .actions{display:flex;gap:8px}
.hero-copy .actions{display:flex;gap:8px;margin-top:8px}
.featured.only-image{grid-template-columns:1fr}
/* Carousel */
.carousel{position:relative}
.carousel-aura{position:absolute;inset:-20% -20% -20% -20%;filter:blur(40px);z-index:0;pointer-events:none}
.carousel-viewport{position:relative;aspect-ratio:8.5/11;border-radius:10px;overflow:hidden;background:#0002}
.carousel-viewport .slide{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:0;transform:scale(1.02);transition:opacity .5s ease, transform .5s ease}
.carousel-viewport .slide.active{opacity:1;transform:scale(1)}
.carousel-controls{position:absolute;inset:auto 8px 8px 8px;display:flex;align-items:center;justify-content:space-between;gap:8px}
.carousel-controls > button[aria-label]{appearance:none;border:1px solid color-mix(in oklab, var(--text) 20%, transparent);background:var(--bg-elev);border-radius:6px;padding:.25rem .5rem;cursor:pointer}
.carousel-controls > button[aria-label]:hover{filter:brightness(1.06)}
.carousel-controls .story-progress{display:flex;gap:6px;justify-content:center;flex:1}
.carousel-controls .segment{position:relative;display:block;flex:1;min-width:0;height:4px;padding:0;border:none;border-radius:999px;overflow:hidden;background:color-mix(in oklab, var(--text) 18%, transparent);cursor:pointer}
.carousel-controls .segment .fill{position:absolute;inset:0 auto 0 0;width:0%;background:color-mix(in oklab, var(--text) 45%, transparent)}
.carousel-controls .segment.active .fill{animation:progress linear forwards}
.carousel-controls .segment.done .fill{width:100%}
@keyframes progress{from{width:0%}to{width:100%}}
@media (max-width: 720px){
	.hero,.featured{grid-template-columns:1fr}
}

/* Product page hero aura */
.product-hero{position:relative}
.product-hero img{width:100%;border-radius:10px;object-fit:cover;background:#0002;position:relative;z-index:1}
.product-aura{position:absolute;inset:-18% -18% -18% -18%;filter:blur(36px);z-index:0;pointer-events:none;border-radius:12px}
/* Crop guides */
.product-hero{
	position:relative;
	display:inline-block;
	width:100%;
	/* Ensure container fits the image exactly */
	line-height: 0;
}
.product-hero img{
	width:100%;
	height:auto;
	border-radius:10px;
	object-fit:cover;
	background:#0002;
	position:relative;
	z-index:1;
	display:block;
	/* Remove any default spacing */
	margin: 0;
	padding: 0;
}
.product-hero .crop-guides{
	position:absolute;
	top:0;
	left:0;
	width:100%;
	height:100%;
	z-index:2;
	pointer-events:none;
	font-size:0;
	/* Ensure crop guides exactly overlay the image */
	border-radius:10px;
	overflow: hidden;
}
.crop-line{position:absolute;background:color-mix(in oklab, var(--text) 80%, transparent);opacity:.85}
.crop-line.horizontal{left:0;right:0;height:2px;transform:translateY(-1px)}
.crop-line.vertical{top:0;bottom:0;width:2px;transform:translateX(-1px)}
.crop-shade{position:absolute;background:rgba(0,0,0,.28);backdrop-filter:blur(1px);}
.crop-shade.top{left:0;right:0;top:0}
.crop-shade.bottom{left:0;right:0}
.crop-shade.left{top:0;bottom:0;left:0}
.crop-shade.right{top:0;bottom:0}

/* Product page layout */
.product-layout {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 16px;
}

@media (max-width: 720px) {
	.product-layout {
		grid-template-columns: 1fr;
		gap: 24px;
	}
	
	/* Ensure product hero container doesn't extend beyond image */
	.product-hero {
		width: 100%;
		max-width: 100%;
	}
	
	.product-hero img {
		width: 100%;
		height: auto;
		max-width: 100%;
	}
	
	/* Crop guides mobile fix */
	.product-hero .crop-guides {
		/* Force crop guides to match image dimensions exactly */
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		width: 100% !important;
		height: 100% !important;
	}
}

/* Home: more options */
.more-options{margin-top:24px}
.more-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.more-header h3{margin:0}
.more-options .grid{grid-template-columns:repeat(2, minmax(0, 1fr))}
@media (max-width: 720px){
	.more-options .grid{grid-template-columns:1fr}
}
.load-more{display:flex;justify-content:center;margin-top:12px}

/* Contact */
.contact{display:grid;gap:12px}
.contact section{border:1px solid var(--border-soft);border-radius:10px;padding:12px;background:var(--bg-subtle)}
.contact .team{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.contact .member{border:1px solid color-mix(in oklab, var(--text) 10%, transparent);border-radius:8px;padding:10px}
@media (max-width: 720px){
	.contact .team{grid-template-columns:1fr}
}

/* About */
.about{display:grid;gap:12px}
.about section{border:1px solid var(--border-soft);border-radius:10px;padding:12px;background:var(--bg-subtle)}

/* Checkout */
.checkout-grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
.checkout-form,.checkout-summary{border:1px solid var(--border-soft);border-radius:10px;padding:12px;background:var(--bg-subtle)}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.form-grid .full{grid-column:1 / -1}
.field label{display:block;font-size:.9rem;opacity:.8;margin-bottom:4px}
.field input:not([type="checkbox"]):not([type="radio"]),
.field textarea{width:100%;padding:.5rem .6rem;border:1px solid var(--border-soft);border-radius:8px;background:color-mix(in oklab, var(--bg) 98%, var(--text) 2%)}
.field .error{color:#c23;font-size:.8rem}
.checklist{display:grid;gap:8px}
.check{display:flex;align-items:center;gap:8px;flex-wrap:nowrap}
.check input[type="checkbox"]{accent-color: color-mix(in oklab, var(--text) 65%, transparent)}
.radio-row{display:grid;gap:8px}
.radio{display:flex;align-items:center;gap:8px;border:1px solid var(--border);border-radius:8px;padding:8px;background:color-mix(in oklab, var(--bg) 98%, var(--text) 2%)}
.radio.selected{outline:2px solid color-mix(in oklab, var(--text) 20%, transparent)}
.radio input[type="checkbox"],
.radio input[type="radio"]{accent-color: color-mix(in oklab, var(--text) 65%, transparent)}
.summary-list{list-style:none;margin:0;padding:0;display:grid;gap:8px}
.summary-line{display:grid;grid-template-columns:60px 1fr auto;gap:8px;align-items:center;border:1px solid color-mix(in oklab, var(--text) 10%, transparent);border-radius:8px;padding:8px;background:color-mix(in oklab, var(--bg) 98%, var(--text) 2%)}
.summary-line img{width:60px;height:60px;object-fit:cover;border-radius:6px}
.summary-line .name{font-weight:600}
.totals{margin-top:8px;display:grid;gap:6px}
.totals > div{display:flex;justify-content:space-between}
.totals .grand{font-weight:800;border-top:1px solid #0002;padding-top:6px}
@media (max-width: 720px){
	.checkout-grid{grid-template-columns:1fr}
	.form-grid{grid-template-columns:1fr}
}

/* Tabs */
.tablist{display:flex;gap:6px;margin:8px 0 12px}
.tab{appearance:none;border:1px solid var(--border);background:var(--bg-elev-2);border-radius:999px;padding:.35rem .75rem;cursor:pointer}
.tab.active{background:color-mix(in oklab, var(--bg) 90%, var(--text) 10%)}

/* Order */
.order-grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px;margin-top:8px}
.order-section{border:1px solid var(--border-soft);border-radius:10px;padding:12px;background:var(--bg-subtle)}
.payment-summary{display:grid;gap:4px;margin-bottom:8px}
.addr{font-style:normal;line-height:1.4}
@media (max-width: 720px){
	.order-grid{grid-template-columns:1fr}
}

/* Cookie banner */
.cookie-banner{
	position:fixed; inset:auto 12px 12px 12px; z-index:50;
	display:grid; gap:8px; align-items:center;
	border:1px solid var(--border);
	border-radius:12px; padding:10px; background:var(--bg-elev);
	box-shadow:0 8px 30px rgba(0,0,0,.18);
}
.cookie-banner .cookie-text{font-size:.9rem; opacity:.9}
.cookie-actions{display:flex; flex-wrap:wrap; align-items:center; gap:8px; justify-content:space-between}
.cookie-actions .check.small{font-size:.9rem; opacity:.95}
.cookie-buttons{display:flex; gap:8px; margin-left:auto}
@media (max-width: 720px){
	.cookie-banner{inset:auto 8px 8px 8px}
}

/* Cart Notification Banner */
.cart-notification {
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	z-index: 1000;
	background: var(--bg-elev);
	border-top: 1px solid var(--border);
	box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.12);
	backdrop-filter: saturate(1.1) blur(8px);
	animation: slideInFromBottom 0.3s ease-out;
	transition: transform 0.3s ease-out, opacity 0.3s ease-out;
	/* Account for safe areas on mobile */
	padding-bottom: env(safe-area-inset-bottom, 0px);
}

.cart-notification.closing {
	transform: translateY(100%);
	opacity: 0;
}

.cart-notification-content {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 16px;
	padding: 16px 24px;
	max-width: 960px;
	margin: 0 auto;
}

.cart-notification-details {
	flex: 1;
	min-width: 0;
}

.cart-notification-message {
	color: var(--text);
	font-weight: 500;
	font-size: 0.95rem;
	display: block;
	margin-bottom: 2px;
}

.cart-notification-meta {
	color: var(--text);
	opacity: 0.7;
	font-size: 0.85rem;
}

.cart-notification-actions {
	display: flex;
	align-items: center;
	gap: 8px;
	flex-shrink: 0;
}

.cart-notification-btn {
	appearance: none;
	border: none;
	background: none;
	cursor: pointer;
	border-radius: 6px;
	transition: background-color 0.2s ease, transform 0.06s ease;
}

.cart-notification-btn.view-cart {
	background: var(--bg-elev-2);
	border: 1px solid var(--border-soft);
	padding: 6px 12px;
	font-size: 0.85rem;
	font-weight: 500;
	color: var(--text);
}

.cart-notification-btn.view-cart:hover {
	background: color-mix(in oklab, var(--bg-elev-2) 90%, var(--text) 10%);
}

.cart-notification-btn.dismiss {
	width: 24px;
	height: 24px;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 18px;
	font-weight: bold;
	color: var(--text);
	opacity: 0.7;
}

.cart-notification-btn.dismiss:hover {
	opacity: 1;
	background: var(--muted);
}

.cart-notification-btn:active {
	transform: translateY(0.5px);
}

@keyframes slideInFromBottom {
	from {
		opacity: 0;
		transform: translateY(100%);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@media (max-width: 480px) {
	.cart-notification {
		/* Ensure proper positioning above browser UI */
		bottom: env(safe-area-inset-bottom, 0px);
		/* Add margin to avoid overlap with floating button */
		margin-right: 80px; /* Space for floating cart button */
		/* Ensure it stays at bottom */
		left: 0;
		right: 80px; /* Leave space for cart button */
		width: auto;
	}
	
	.cart-notification-content {
		flex-direction: column;
		align-items: stretch;
		text-align: center;
		padding: 16px;
	}
	
	.cart-notification-details {
		margin-bottom: 12px;
	}
	
	.cart-notification-actions {
		justify-content: center;
	}
}

/* Tablet-specific adjustments */
@media (max-width: 720px) and (min-width: 481px) {
	.cart-notification {
		/* Less margin needed on tablet */
		margin-right: 90px; /* Space for floating cart button */
		bottom: env(safe-area-inset-bottom, 0px);
	}
}

/* Mobile viewport and stacking fixes */
@media (max-width: 768px) {
	/* Ensure proper stacking on mobile */
	.cart-notification {
		position: fixed !important;
		z-index: 1000 !important;
	}
	
	.floating-cart-btn {
		position: fixed !important;
		z-index: 9999 !important;
		/* Ensure maximum visibility and persistence */
		visibility: visible !important;
		opacity: 1 !important;
	}
	
	.cart-drawer {
		position: fixed !important;
		z-index: 1001 !important;
	}
	
	.cart-drawer-overlay {
		position: fixed !important;
		z-index: 1000 !important;
	}
}

/* iOS-specific button fixes */
button, .button, input[type="button"], input[type="submit"] {
	/* Remove iOS default button styling */
	-webkit-appearance: none;
	-moz-appearance: none;
	appearance: none;
	
	/* Prevent iOS blue highlights */
	-webkit-tap-highlight-color: transparent;
	
	/* Ensure consistent text rendering */
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	
	/* Remove iOS focus outline */
	outline: none;
	
	/* Prevent text selection on buttons */
	-webkit-user-select: none;
	-moz-user-select: none;
	user-select: none;
	
	/* Ensure consistent font */
	font-family: inherit;
	font-size: inherit;
}

/* Ensure all interactive elements don't get iOS blue styling */
a, button, [role="button"], [tabindex] {
	-webkit-tap-highlight-color: transparent;
}

/* Mobile performance and UX improvements */
@media (max-width: 768px) {
	/* Prevent horizontal scrolling */
	body {
		overflow-x: hidden;
	}
	
	/* Improve mobile form controls */
	select, input[type="number"] {
		font-size: 16px; /* Prevents zoom on iOS */
		min-height: 44px;
		-webkit-appearance: none;
		appearance: none;
	}
	
	/* Better mobile image loading */
	img {
		max-width: 100%;
		height: auto;
	}
	
	/* Improve touch targets for mobile */
	a, button, [role="button"] {
		min-height: 44px;
		display: inline-flex;
		align-items: center;
		justify-content: center;
	}
	
	/* Mobile-friendly grid spacing */
	.grid {
		gap: 12px;
	}
	
	/* Better mobile shop toolbar */
	.shop-toolbar {
		flex-direction: column;
		align-items: stretch;
		gap: 8px;
	}
	
	.shop-toolbar .field.range {
		min-width: auto;
	}
	
	/* Enhanced mobile button styling */
	.button, button {
		/* Ensure consistent coloring on mobile */
		background: var(--bg-elev-2) !important;
		color: var(--text) !important;
		border: 1px solid var(--border-soft) !important;
		
		/* Remove any iOS default styling */
		-webkit-appearance: none !important;
		appearance: none !important;
		
		/* Consistent font rendering */
		font-family: system-ui, -apple-system, sans-serif !important;
		
		/* Prevent iOS button morphing */
		border-radius: 12px !important;
		
		/* Consistent padding for touch */
		padding: 12px 16px !important;
		min-height: 44px !important;
	}
	
	/* Navigation buttons mobile fixes */
	.nav-buttons button {
		background: var(--bg-elev-2) !important;
		color: var(--text) !important;
		border: 1px solid var(--border-soft) !important;
		-webkit-appearance: none !important;
		appearance: none !important;
	}
	
	/* Cart notification buttons mobile fixes */
	.cart-notification-btn.view-cart {
		background: var(--bg-elev-2) !important;
		color: var(--text) !important;
		border: 1px solid var(--border-soft) !important;
		-webkit-appearance: none !important;
		appearance: none !important;
	}
}
